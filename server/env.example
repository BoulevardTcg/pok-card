# ===== CONFIGURATION SÉCURISÉE DU SERVEUR =====

# Base de données PostgreSQL
# Format: postgresql://[user]:[password]@[host]:[port]/[database]?[params]
# Exemples:
# - Local: postgresql://postgres:password@localhost:5432/boulevardtcg
# - Production: postgresql://user:pass@host:5432/db?sslmode=require&connection_limit=10
# - Avec pooler: postgresql://user:pass@host:5432/db?pgbouncer=true
DATABASE_URL="postgresql://postgres:password@localhost:5432/boulevardtcg?schema=public"

# Sécurité JWT
JWT_SECRET="VOTRE_SECRET_JWT_TRÈS_LONG_ET_COMPLEXE_ICI_MINIMUM_64_CARACTÈRES"
JWT_REFRESH_SECRET="VOTRE_SECRET_REFRESH_TRÈS_LONG_ET_COMPLEXE_ICI_MINIMUM_64_CARACTÈRES"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# Configuration serveur
PORT=8080
NODE_ENV="development"

# CORS (liste CSV d'origins autorisés)
CORS_ORIGIN="http://localhost:3000,http://localhost:5173"

# Domaines autorisés pour les redirections Stripe (liste CSV d'origins complets)
# Le code extrait l'origin de chaque URL, donc mettre des URLs complètes
# Ex prod: "https://boulevardtcg.com,https://www.boulevardtcg.com"
ALLOWED_REDIRECT_DOMAINS="http://localhost:3000,https://boulevardtcg.com"

# Sécurité
CACHE_TTL_MS=60000
MAX_REQUEST_SIZE="1mb"

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX_ATTEMPTS=5

# Logs
LOG_LEVEL="info"
LOG_SENSITIVE_DATA=false

# Stripe (Paiement)
STRIPE_SECRET_KEY="sk_test_VOTRE_CLE_SECRETE_STRIPE"
STRIPE_WEBHOOK_SECRET="whsec_VOTRE_SECRET_WEBHOOK_STRIPE"
STRIPE_API_VERSION="2024-06-20"
# URLs de checkout (doivent correspondre à FRONTEND_PUBLIC_URL)
CHECKOUT_SUCCESS_URL="http://localhost:3000/checkout/success"
CHECKOUT_CANCEL_URL="http://localhost:3000/panier"

# Emails (SMTP)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="votre-email@gmail.com"
SMTP_PASS="votre-mot-de-passe-application"
SHOP_NAME="Boulevard TCG"
SHOP_EMAIL="contact@boulevardtcg.com"

# URLs Frontend
# FRONTEND_PUBLIC_URL: URL publique accessible par le navigateur (emails, redirects, liens utilisateurs)
# - Dev local sans Docker: http://localhost:5173
# - Dev avec Docker Compose: http://localhost:3000
# - Production: https://boulevardtcg.com
FRONTEND_PUBLIC_URL="http://localhost:3000"

# FRONTEND_INTERNAL_URL: URL interne Docker (pour appels inter-conteneurs si nécessaire)
# Uniquement utile en Docker Compose
FRONTEND_INTERNAL_URL="http://pokecard-frontend:80"

# DEPRECATED: FRONTEND_URL est remplacé par FRONTEND_PUBLIC_URL
# Conservé pour rétrocompatibilité, sera supprimé dans une future version
# FRONTEND_URL="http://localhost:5173"

# ===== SEED DATABASE (dev only) =====
# Configuration pour prisma db seed
SEED_ADMIN_EMAIL="admin@example.com"
SEED_ADMIN_PASSWORD="ChangeThisSecurePassword123!"
SEED_ADMIN_USERNAME="admin"
SEED_ADMIN_FIRST_NAME="Admin"
SEED_ADMIN_LAST_NAME="User"

# Utilisateurs de test (optionnel - dev uniquement)
SEED_CREATE_TEST_USERS="false"
SEED_TEST_PASSWORD="TestPassword123!"

# ⚠️ ATTENTION : 
# - Ne jamais commiter ce fichier .env en production
# - Utiliser des secrets forts et uniques
# - Changer les secrets régulièrement
# - Utiliser des variables d'environnement en production
# - Pour Stripe : utiliser les clés de test en développement, les clés live en production
# - Pour Gmail : créer un mot de passe d'application (pas votre mot de passe normal)
